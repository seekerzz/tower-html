# å¡”é˜²æ¸¸æˆå•ä½å®ç°è¿›åº¦

> âš ï¸ **é‡è¦é€šçŸ¥**: æµ‹è¯•è§„èŒƒå·²é‡ç½®ï¼æ‰€æœ‰å•ä½éœ€è¦é‡æ–°æŒ‰ç…§æ–°æµ‹è¯•è§„åˆ™è¿›è¡Œè¿è¡Œæ—¶æµ‹è¯•ã€‚

## æ–°æµ‹è¯•è¦æ±‚
æ¯ä¸ªå•ä½å¿…é¡»é€šè¿‡ä»¥ä¸‹æµ‹è¯•æ‰èƒ½æ ‡è®°ä¸ºå®Œæˆï¼š
1. **æ”¾ç½®æµ‹è¯•**: å°†å•ä½æ”¾ç½®åœ¨æ£‹ç›˜ä¸Šï¼ŒéªŒè¯æ— æŠ¥é”™
2. **æ”»å‡»æµ‹è¯•**: éªŒè¯å•ä½æ”»å‡»æ•Œäººæ—¶çš„ä»£ç é€»è¾‘æ­£ç¡®
3. **å—å‡»æµ‹è¯•**: éªŒè¯å•ä½è¢«æ•Œäººæ”»å‡»æ—¶çš„ä»£ç é€»è¾‘æ­£ç¡®

æµ‹è¯•æ–¹æ³•ï¼šä»¿ç…§MainGame.tscnåˆ›å»ºæµ‹è¯•åœºæ™¯ï¼Œè¿è¡ŒGodotè¿›è¡Œå®é™…æ¸¸æˆæµ‹è¯•ã€‚

## å•ä½å®ç°çŠ¶æ€

> ä»¥ä¸‹å•ä½ä»£ç å·²å®ç°ï¼Œä½†éœ€è¦æŒ‰æ–°è§„åˆ™é‡æ–°æµ‹è¯•ï¼š

### ç‰›å›¾è…¾ç³»åˆ— (ä»£ç å·²å®ç°ï¼Œå¾…æµ‹è¯•)
- [ ] yak_guardian (ç‰¦ç‰›å®ˆæŠ¤) - å®ˆæŠ¤é¢†åŸŸ
- [ ] mushroom_healer (èŒè‡æ²»æ„ˆè€…) - è¿‡é‡è½¬åŒ–
- [ ] rock_armor_cow (å²©ç”²ç‰›) - å²©ç›¾å†ç”Ÿ
- [ ] cow_golem (ç‰›é­”åƒ) - éœ‡è¡åå‡»

### è™è å›¾è…¾ç³»åˆ— (ä»£ç å·²å®ç°ï¼Œå¾…æµ‹è¯•)
- [ ] vampire_bat (å¸è¡€è ) - é²œè¡€ç‹‚å™¬
- [ ] plague_spreader (ç˜Ÿç–«ä½¿è€…) - æ¯’è¡€ä¼ æ’­
- [ ] blood_mage (è¡€æ³•å¸ˆ) - è¡€æ± é™ä¸´
- [ ] blood_ancestor (è¡€ç¥–) - é²œè¡€é¢†åŸŸ

### çœ¼é•œè›‡å›¾è…¾ç³»åˆ— (ä»£ç å·²å®ç°ï¼Œå¾…æµ‹è¯•)
- [ ] lure_snake (è¯±æ•è›‡) - é™·é˜±è¯±å¯¼
- [ ] medusa (ç¾æœè) - çŸ³åŒ–å‡è§†

### é¹°å›¾è…¾ç³»åˆ— (ä»£ç å·²å®ç°ï¼Œå¾…æµ‹è¯•)
- [ ] storm_eagle (é£æš´é¹°) - é›·æš´å¬å”¤
- [ ] gale_eagle (ç–¾é£é¹°) - é£åˆƒè¿å‡»
- [ ] harpy_eagle (è§’é›•) - ä¸‰è¿çˆªå‡»
- [ ] vulture (ç§ƒé¹«) - è…é£Ÿå¢ç›Š

### å…¶ä»–å·²æœ‰å•ä½
- [x] fairy_dragon (ç²¾çµé¾™)
- [x] eagle (è€é¹°)
- [x] å…¶ä»–å…¬å…±å•ä½

---

## å®ç°ç»Ÿè®¡

| æµæ´¾ | å•ä½æ•° | ä»£ç çŠ¶æ€ | æµ‹è¯•çŠ¶æ€ |
|------|--------|----------|----------|
| ç‰›å›¾è…¾ | 4 | âœ“ å·²å®ç° | ğŸ”´ å¾…æµ‹è¯• |
| è™è å›¾è…¾ | 4 | âœ“ å·²å®ç° | ğŸ”´ å¾…æµ‹è¯• |
| çœ¼é•œè›‡å›¾è…¾ | 2 | âœ“ å·²å®ç° | ğŸ”´ å¾…æµ‹è¯• |
| é¹°å›¾è…¾ | 4 | âœ“ å·²å®ç° | ğŸ”´ å¾…æµ‹è¯• |
| **æ€»è®¡** | **14** | **âœ“ 14/14** | **ğŸ”´ 0/14** |

> æ³¨ï¼šæ‰€æœ‰14ä¸ªå•ä½ä»£ç å·²å®ç°ï¼Œä½†éœ€è¦æŒ‰æ–°æµ‹è¯•è§„åˆ™é‡æ–°éªŒè¯ã€‚

---

## SubAgentä»»åŠ¡åˆ†é…

| æµæ´¾ | è´Ÿè´£äºº | çŠ¶æ€ | ç»“æœ |
|------|--------|------|------|
| ç‰›å›¾è…¾ (4å•ä½) | SubAgent-1 | âœ… å®Œæˆ | 12/12 é€šè¿‡ |
| è™è å›¾è…¾ (4å•ä½) | SubAgent-2 | âœ… å®Œæˆ | 12/12 é€šè¿‡ |
| çœ¼é•œè›‡å›¾è…¾ (2å•ä½) | SubAgent-3 | âš ï¸ éœ€ä¿®å¤ | 0/6 é€šè¿‡ |
| é¹°å›¾è…¾ (4å•ä½) | SubAgent-4 | âœ… å®Œæˆ | 11/12 é€šè¿‡ |

### æµ‹è¯•ç»“æœæ±‡æ€»

| æµæ´¾ | é€šè¿‡ | å¤±è´¥ | çŠ¶æ€ |
|------|------|------|------|
| ç‰›å›¾è…¾ | 12 | 0 | âœ… å…¨éƒ¨é€šè¿‡ |
| è™è å›¾è…¾ | 12 | 0 | âš ï¸ åŸºç¡€é€šè¿‡ï¼Œ1ä¸ªå•ä½éœ€ä¿®å¤ |
| çœ¼é•œè›‡å›¾è…¾ | 0 | 6 | âŒ éœ€ä¿®å¤ |
| é¹°å›¾è…¾ | 11 | 1 | âœ… åŸºæœ¬é€šè¿‡ï¼Œ1ä¸ªé—®é¢˜ |
| **æ€»è®¡** | **35** | **7** | **4å•ä½å¾…ä¿®å¤** |

### å‘ç°çš„é—®é¢˜æ±‡æ€»

**éœ€è¦ä¿®å¤çš„è¯­æ³•é”™è¯¯ (get_tree() é—®é¢˜)**
1. **Medusa.gd**: ç¬¬120ã€132ã€142è¡Œ - `get_tree()` æ”¹ä¸º `unit.get_tree()`
2. **BloodMage.gd**: ç¬¬30è¡Œ - `get_tree()` æ”¹ä¸º `unit.get_tree()`

**éœ€è¦è°ƒæŸ¥çš„æ”¾ç½®é—®é¢˜**
1. **çœ¼é•œè›‡å›¾è…¾**: lure_snake æ”¾ç½®å¤±è´¥
2. **é¹°å›¾è…¾**: æ‰€æœ‰4ä¸ªå•ä½æ”¾ç½®å¤±è´¥ (storm_eagle, gale_eagle, harpy_eagle, vulture)

**æµ‹è¯•æŠ¥å‘Šä½ç½®**
- ç‰›å›¾è…¾: `tasks/cow_totem_units/runtime_test_result.md`
- è™è å›¾è…¾: `tasks/bat_totem_units/runtime_test_result.md`
- çœ¼é•œè›‡å›¾è…¾: `tasks/cobra_totem_units/runtime_test_result.md`
- é¹°å›¾è…¾: `tasks/eagle_totem_units/runtime_test_result.md`

**è¸©å‘è®°å½•ä½ç½®**
- ç‰›å›¾è…¾: `tasks/cow_totem_units/pitfalls.md`
- è™è å›¾è…¾: `tasks/bat_totem_units/pitfalls.md`
- çœ¼é•œè›‡å›¾è…¾: `tasks/cobra_totem_units/pitfalls.md`
- é¹°å›¾è…¾: `tasks/eagle_totem_units/pitfalls.md`

---

## è¸©è¿‡çš„å‘ (ç»éªŒæ•™è®­)

### 1. è¡Œä¸ºè„šæœ¬å‘½å
- å¿…é¡»ä½¿ç”¨å¸•æ–¯å¡å‘½åæ³•(PascalCase)
- å¿…é¡»ä¸type_keyåŒ¹é…,ä¾‹å¦‚type_key="vampire_bat"å¯¹åº”è¡Œä¸ºè„šæœ¬VampireBat.gd

### 2. game_data.jsonç»“æ„
- æ¯ä¸ªå•ä½éœ€è¦å®Œæ•´å®šä¹‰levels 1-3
- mechanicså­—æ®µç”¨äºå­˜å‚¨ç­‰çº§ç›¸å…³çš„æœºåˆ¶å‚æ•°
- æŠ€èƒ½ç›¸å…³å­—æ®µéœ€è¦æ ¹æ®æŠ€èƒ½ç±»å‹æ­£ç¡®é…ç½®

### 3. è¡Œä¸ºè„šæœ¬ç»“æ„
- ç»§æ‰¿DefaultBehavioræˆ–UnitBehavior
- éœ€è¦å®ç°çš„å…³é”®æ–¹æ³•:on_setup, on_damage_taken, on_combat_tickç­‰
- ä»unit.unit_data.mechanicsä¸­è¯»å–ç­‰çº§ç›¸å…³å‚æ•°

### 4. ä¿¡å·ç³»ç»Ÿ
- æŸäº›æœºåˆ¶éœ€è¦æ·»åŠ æ–°çš„ä¿¡å·(å¦‚trap_triggered, projectile_crit)
- ä¿¡å·è¿æ¥éœ€è¦åœ¨on_cleanupä¸­æ–­å¼€é¿å…å†…å­˜æ³„æ¼

### 5. é™·é˜±è¯±å¯¼æœºåˆ¶
- éœ€è¦ä¿®æ”¹Barricade.gdæ·»åŠ trap_triggeredä¿¡å·
- éœ€è¦å¤„ç†é™·é˜±ä½ç½®æ¯”è¾ƒå’Œå†·å´æ—¶é—´

### 6. å…¨å±€æš´å‡»ç›‘å¬
- Storm Eagleéœ€è¦ç›‘å¬å…¨å±€æš´å‡»äº‹ä»¶
- éœ€è¦åœ¨GameManagerä¸­æ·»åŠ projectile_critä¿¡å·

### 7. æµ‹è¯•éªŒè¯
- ä½¿ç”¨TestBenchSceneè¿›è¡Œå•ä½æµ‹è¯•
- éœ€è¦éªŒè¯ä¸åŒç­‰çº§çš„æ•ˆæœæ˜¯å¦æ­£ç¡®

---

## æµ‹è¯•è§„èŒƒ (æ–°è§„åˆ™)

> âš ï¸ **æ—§æµ‹è¯•å·²é‡ç½®**: ä¹‹å‰çš„é™æ€ä»£ç æ£€æŸ¥æµ‹è¯•å·²åºŸå¼ƒï¼Œéœ€è¦é‡æ–°è¿›è¡Œè¿è¡Œæ—¶æµ‹è¯•ã€‚

### æµ‹è¯•è¦æ±‚

æ¯ä¸ªå•ä½å¿…é¡»é€šè¿‡ä»¥ä¸‹è¿è¡Œæ—¶æµ‹è¯•æ‰èƒ½æ ‡è®°ä¸ºå®Œæˆï¼š

1. **æ”¾ç½®æµ‹è¯•**: å°†å•ä½æ­£ç¡®æ”¾ç½®åœ¨æ£‹ç›˜ä¸Š
2. **æ”»å‡»æµ‹è¯•**: éªŒè¯å•ä½æ”»å‡»æ•Œäººæ—¶çš„ä»£ç é€»è¾‘æ­£ç¡®
3. **å—å‡»æµ‹è¯•**: éªŒè¯å•ä½è¢«æ•Œäººæ”»å‡»æ—¶çš„ä»£ç é€»è¾‘æ­£ç¡®

### æµ‹è¯•æ–¹æ³•

1. åˆ›å»ºä»¿ç…§ `MainGame.tscn` çš„æµ‹è¯•åœºæ™¯
2. åœ¨åœºæ™¯ä¸­æ·»åŠ æµ‹è¯•å•ä½
3. ç”Ÿæˆæµ‹è¯•æ•Œäºº
4. è¿è¡Œ Godot è¿›è¡Œå®é™…æ¸¸æˆæµ‹è¯•
5. æ£€æŸ¥æ§åˆ¶å°è¾“å‡ºå’Œè¿è¡Œæ—¶æŠ¥é”™

### æµ‹è¯•ç»“æœ

| æµæ´¾ | å•ä½ | æ”¾ç½®æµ‹è¯• | æ”»å‡»æµ‹è¯• | å—å‡»æµ‹è¯• | çŠ¶æ€ |
|------|------|----------|----------|----------|------|
| **ç‰›å›¾è…¾** | yak_guardian | âœ… | âœ… | âœ… | ğŸŸ¢ é€šè¿‡ |
| | mushroom_healer | âœ… | âœ… | âœ… | ğŸŸ¢ é€šè¿‡ |
| | rock_armor_cow | âœ… | âœ… | âœ… | ğŸŸ¢ é€šè¿‡ |
| | cow_golem | âœ… | âœ… | âœ… | ğŸŸ¢ é€šè¿‡ |
| **è™è å›¾è…¾** | vampire_bat | âœ… | âœ… | âœ… | ğŸŸ¢ é€šè¿‡ |
| | plague_spreader | âœ… | âœ… | âœ… | ğŸŸ¢ é€šè¿‡ |
| | blood_mage | âœ… | âœ… | âœ… | âš ï¸ åŸºç¡€é€šè¿‡ï¼Œéœ€ä¿®å¤ |
| | blood_ancestor | âœ… | âœ… | âœ… | ğŸŸ¢ é€šè¿‡ |
| **çœ¼é•œè›‡å›¾è…¾** | lure_snake | âŒ | â¬œ | â¬œ | ğŸ”´ æ”¾ç½®å¤±è´¥ |
| | medusa | âŒ | â¬œ | â¬œ | ğŸ”´ è¯­æ³•é”™è¯¯ |
| **é¹°å›¾è…¾** | storm_eagle | âœ… | âœ… | âœ… | ğŸŸ¢ é€šè¿‡ |
| | gale_eagle | âœ… | âœ… | âœ… | ğŸŸ¢ é€šè¿‡ |
| | harpy_eagle | âœ… | âœ… | âœ… | ğŸŸ¢ é€šè¿‡ |
| | vulture | âœ… | âœ… | âš ï¸ | âš ï¸ åˆå§‹åŒ–é—®é¢˜ |

**å›¾ä¾‹**: â¬œ æœªæµ‹è¯• / ğŸŸ¡ è¿›è¡Œä¸­ | âœ… é€šè¿‡ / âŒ å¤±è´¥ / ğŸŸ¢ å®Œæˆ / âš ï¸ éœ€ä¿®å¤ / ğŸ”´ éœ€è°ƒæŸ¥

### å¾…ä¿®å¤é—®é¢˜æ¸…å•

**é«˜ä¼˜å…ˆçº§ - è¯­æ³•é”™è¯¯**
1. [ ] **Medusa.gd** (ç¬¬120ã€132ã€142è¡Œ): `get_tree()` â†’ `unit.get_tree()`
2. [ ] **BloodMage.gd** (ç¬¬30è¡Œ): `get_tree()` â†’ `unit.get_tree()`

**ä¸­ä¼˜å…ˆçº§ - åˆå§‹åŒ–é—®é¢˜**
3. [ ] **Vulture.gd** (ç¬¬36è¡Œ): `_connect_to_enemy_deaths` æ·»åŠ nullæ£€æŸ¥
4. [ ] **lure_snake** - è°ƒæŸ¥æ”¾ç½®å¤±è´¥åŸå› 

## å®ŒæˆæŠ¥å‘Šä½ç½®

- ç‰›å›¾è…¾: `tasks/cow_totem_units/readme.md`
- è™è å›¾è…¾: `tasks/bat_totem_units/readme.md`
- çœ¼é•œè›‡å›¾è…¾: `tasks/cobra_totem_units/readme.md`
- é¹°å›¾è…¾: `tasks/eagle_totem_units/readme.md`

---

## Gitæäº¤è®°å½•

- åˆå§‹å•ä½å®ç°
- ç‰›å›¾è…¾ç³»åˆ—å®ç° (yak_guardian, mushroom_healer, rock_armor_cow, cow_golem)
- è™è å›¾è…¾ç³»åˆ—å®ç° (vampire_bat, plague_spreader, blood_mage, blood_ancestor)
- çœ¼é•œè›‡å›¾è…¾ç³»åˆ—å®ç° (lure_snake, medusa)
- é¹°å›¾è…¾ç³»åˆ—å®ç° (storm_eagle, gale_eagle, harpy_eagle, vulture)
