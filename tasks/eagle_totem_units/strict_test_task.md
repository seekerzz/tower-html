# 鹰图腾系列严格测试任务

## 任务概述
测试鹰图腾系列的4个单位，按照严格测试规范进行实战测试。

## 测试环境
- 测试场景: `src/Scenes/Tests/TestEagleTotemRuntime.tscn`
- 测试脚本: `src/Scripts/Tests/TestEagleTotemRuntime.gd`
- 参考实现: `src/Scripts/Units/Behaviors/`

---

## 单位1: StormEagle (风暴鹰)

### 机制说明
- 友方暴击时积累电荷
- L1: 5层触发全场雷击
- L2: 4层触发
- L3: 3层触发，雷击可暴击
- 雷击伤害 = 攻击力 * 2

### 严格测试步骤

#### 放置测试
1. 放置storm_eagle于(0,0)
2. 验证无报错

#### 攻击测试（重点）
1. 放置一个高暴击率的友方单位（如bee）
2. 让bee攻击敌人触发暴击
3. 观察storm_eagle积累电荷（显示"⚡X/Y"）
4. 达到所需层数后验证全场雷击
5. 测试L2(4层)和L3(3层+可暴击)

#### 实战测试
- 运行30秒
- 验证电荷积累和雷击触发稳定性

---

## 单位2: GaleEagle (疾风鹰)

### 机制说明
- 每次攻击发射多道风刃
- L1: 2道风刃，每道60%伤害
- L2: 3道风刃，每道65%伤害
- L3: 4道风刃，每道70%伤害

### 严格测试步骤

#### 放置测试
1. 放置gale_eagle于(0,0)
2. 验证无报错

#### 攻击测试（重点）
1. 在攻击范围内放置敌人
2. 观察每次攻击发射的风刃数量
3. 验证L1发射2道风刃
4. 验证L2发射3道风刃
5. 验证L3发射4道风刃
6. 验证每道风刃的伤害比例

#### 实战测试
- 运行30秒
- 验证风刃散射效果

---

## 单位3: HarpyEagle (角雕)

### 机制说明
- 快速进行3次爪击
- 每道爪击造成60%/65%/70%伤害
- L3: 第三击施加流血效果

### 严格测试步骤

#### 放置测试
1. 放置harpy_eagle于(0,0)
2. 验证无报错

#### 攻击测试（重点）
1. 在攻击范围内放置敌人
2. 观察三连击序列（显示"CLAW 1", "CLAW 2", "CLAW 3"）
3. 验证攻击间隔快速
4. 验证L3第三击的流血效果（"BLEED!"）
5. 升级测试各等级的伤害比例

#### 实战测试
- 运行30秒
- 验证三连击循环稳定性

---

## 单位4: Vulture (秃鹫)

### 机制说明
- 周围300范围内有敌人死亡时，攻击+5%持续5秒
- 最多叠加5层
- L3时额外获得10%吸血

### 严格测试步骤

#### 放置测试
1. 放置vulture于(0,0)
2. 验证无报错（注意is_inside_tree检查）

#### 攻击测试（重点）
1. 记录vulture基础攻击力
2. 在300范围内放置敌人并杀死
3. 验证攻击增加5%（显示"+5% ATK"）
4. 杀死多个敌人，验证叠加（最多5层=25%）
5. 等待5秒，验证buff消失（"BUFF END"）
6. L3时验证吸血效果

#### 实战测试
- 运行30秒
- 验证buff叠加和消失逻辑

---

## 输出要求

1. `tasks/eagle_totem_units/strict_test_result.md`
2. `tasks/eagle_totem_units/pitfalls.md`
3. 更新`progress.md`

## 注意事项
- Vulture注意`is_inside_tree()`检查
- StormEagle需要友方暴击配合测试
- HarpyEagle继承FlyingMeleeBehavior，注意飞行路径
